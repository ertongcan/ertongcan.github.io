{"version":3,"file":"bundle.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,2EAA2E,KAAK,EAAE;AACjH;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE;AACnE,cAAc;AACd;AACA;AACA;AACA,SAAS;AACT;AACA,CAAC;AACD;AACA;AACA,8CAA8C,oBAAoB;AAClE;AACA,CAAC;AACD","sources":["webpack:///./main.js"],"sourcesContent":["const videoElement = document.getElementById('video-input');\r\nconst p1Card = document.getElementById('p1-card');\r\nconst p2Card = document.getElementById('p2-card');\r\nconst p1Score = document.getElementById('p1-score');\r\nconst p2Score = document.getElementById('p2-score');\r\n\r\nconst faceMesh = new FaceMesh({locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`});\r\n\r\nfaceMesh.setOptions({\r\n    maxNumFaces: 2, // Crucial for Duel\r\n    refineLandmarks: true,\r\n    minDetectionConfidence: 0.6,\r\n    minTrackingConfidence: 0.6\r\n});\r\n\r\n// Forensic calculation function\r\nfunction getForensicScore(face) {\r\n    const bridge = face[168]; // Nose bridge anchor\r\n    const eyeL = face[133];   // Inner Left\r\n    const eyeR = face[362];   // Inner Right\r\n\r\n    const dist3D = (a, b) => Math.hypot(a.x-b.x, a.y-b.y, a.z-b.z);\r\n\r\n    const leftSide = dist3D(bridge, eyeL);\r\n    const rightSide = dist3D(bridge, eyeR);\r\n\r\n    // Calculate percentage difference\r\n    const ratio = Math.abs(leftSide - rightSide) / ((leftSide + rightSide) / 2);\r\n    return ratio * 100;\r\n}\r\n\r\nfaceMesh.onResults(results => {\r\n    // Clear display if no one is found\r\n    p1Score.innerText = \"--%\"; p2Score.innerText = \"--%\";\r\n    p1Card.className = \"player-card\"; p2Card.className = \"player-card\";\r\n\r\n    if (results.multiFaceLandmarks?.length > 0) {\r\n        // Sort faces by X position so Player 1 is always the left-most person on screen\r\n        const sortedFaces = [...results.multiFaceLandmarks].sort((a, b) => a[1].x - b[1].x);\r\n\r\n        sortedFaces.forEach((face, i) => {\r\n            const imbalance = getForensicScore(face);\r\n            const scoreText = imbalance.toFixed(1) + \"%\";\r\n\r\n            // Map face to UI (P1 = Left, P2 = Right)\r\n            if (i === 0) {\r\n                p1Score.innerText = scoreText;\r\n                if (imbalance < 6) p1Card.classList.add('winner'); // Threshold for \"Very Real\"\r\n            } else if (i === 1) {\r\n                p2Score.innerText = scoreText;\r\n                if (imbalance < 6) p2Card.classList.add('winner');\r\n            }\r\n        });\r\n    }\r\n});\r\n\r\nconst camera = new Camera(videoElement, {\r\n    onFrame: async () => await faceMesh.send({image: videoElement}),\r\n    width: 960, height: 540\r\n});\r\ncamera.start();\r\n"],"names":[],"ignoreList":[],"sourceRoot":""}