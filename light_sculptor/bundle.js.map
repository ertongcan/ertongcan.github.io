{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack:///./game.js"],"sourcesContent":["const canvas = document.getElementById('canvas');\r\nconst menu = document.getElementById('menu');\r\nconst btnWhite = document.getElementById('btn-white');\r\nconst btnRed = document.getElementById('btn-red');\r\nconst btnGreen = document.getElementById('btn-green');\r\nconst btnBlue = document.getElementById('btn-blue');\r\nconst btnClose = document.getElementById('btn-close');\r\nconst btnSteady = document.getElementById('fx-none');\r\nconst btnPulse = document.getElementById('fx-pulse');\r\nconst btnStrobe = document.getElementById('fx-strobe');\r\n\r\nlet state = {\r\n    split: 50, warmth: 255, softness: 0,\r\n    mode: 'white', isPulsing: false,\r\n    initialPinchDist: 0\r\n};\r\n\r\n    // --- CORE INTERACTION ---\r\nfunction updateDisplay() {\r\n    let color;\r\n    if (state.mode === 'white') {\r\n    color = `rgb(255, ${Math.max(180, state.warmth)}, ${state.warmth})`;\r\n    } else if (state.mode === 'red') {\r\n        color = `rgb(${state.warmth}, 0, 0)`;\r\n    } else if (state.mode === 'blue') {\r\n        color = `rgb(0, 0, ${state.warmth})`;\r\n    } else if (state.mode === 'green') {\r\n        color = `rgb(0, ${state.warmth}, 0)`;\r\n    }\r\n\r\n    canvas.style.opacity = 1;\r\n\r\n    document.documentElement.style.setProperty('--light-color', color);\r\n    document.documentElement.style.setProperty('--split', state.split + '%');\r\n    document.documentElement.style.setProperty('--softness', state.softness + '%');\r\n}\r\n\r\n    // --- GESTURES ---\r\n    let pressTimer;\r\n    const TRIGGER_ZONE = 60;\r\nwindow.addEventListener('touchstart', (e) => {\r\n\r\n    //menu.style.display = 'flex';\r\n    const touch = e.touches[0];\r\n    const screenWidth = window.innerWidth;\r\n\r\n    // Check if the touch is in the top-right corner\r\n    const isTopRight = (touch.clientX > screenWidth - TRIGGER_ZONE) && (touch.clientY < TRIGGER_ZONE);\r\n\r\n    if (isTopRight) {\r\n    // Toggle Menu\r\n    const isHidden = menu.style.display === 'none' || menu.style.display === '';\r\n    menu.style.display = isHidden ? 'flex' : 'none';\r\n\r\n    // Vibrate for feedback (Requires Capacitor Haptics plugin)\r\n    if (window.Capacitor) {\r\n    // Haptics.impact({ style: 'light' });\r\n}\r\n\r\n    // Prevent the light from shifting when we just wanted the menu\r\n    return;\r\n}\r\n\r\n\r\n});\r\n\r\nwindow.addEventListener('touchmove', (e) => {\r\n    // clearTimeout(pressTimer);\r\n    if (menu.style.display === 'flex') return;\r\n    e.preventDefault();\r\n    const touch = e.touches[0];\r\n    state.split = (touch.clientX / window.innerWidth) * 100;\r\n    state.warmth = (touch.clientY / window.innerHeight) * 255;\r\n\r\n    if (e.touches.length === 2) {\r\n        const dX = e.touches[0].clientX - e.touches[1].clientX;\r\n        const dY = e.touches[0].clientY - e.touches[1].clientY;\r\n        const currentDist = Math.sqrt(dX * dX + dY * dY);\r\n        // Calculate change in distance\r\n        const sensitivity = 0.15;\r\n        const delta = (currentDist - state.initialPinchDist) * sensitivity;\r\n\r\n        state.softness = Math.max(0, Math.min(45, state.softness + delta));\r\n        state.initialPinchDist = currentDist; // Reset for smooth scaling\r\n    }\r\n    updateDisplay();\r\n    hint.style.opacity = 0;\r\n});\r\n\r\n    // window.addEventListener('touchend', () => clearTimeout(pressTimer));\r\n\r\n    // --- PRO FEATURES ---\r\nfunction setMode(m) {\r\n    state.mode = m;\r\n    document.querySelectorAll('.btn-group button').forEach(b => b.classList.remove('active'));\r\n    event.target.classList.add('active');\r\n    updateDisplay();\r\n}\r\n\r\nlet effectInterval = null;\r\nlet currentSpeed = 500; // milliseconds\r\nlet effectMode = 'none'; // 'none', 'pulse', or 'strobe'\r\n\r\nbtnWhite.addEventListener(\"click\", () => {\r\n    setMode('white');\r\n});\r\n\r\nbtnGreen.addEventListener(\"click\", () => {\r\n    setMode('green');\r\n});\r\n\r\nbtnRed.addEventListener(\"click\", () => {\r\n    setMode('red');\r\n});\r\n\r\nbtnBlue.addEventListener(\"click\", () => {\r\n    setMode('blue');\r\n});\r\nfunction setEffect(mode) {\r\n    effectMode = mode;\r\n\r\n    // UI Update\r\n    document.querySelectorAll('[id^=\"fx-\"]').forEach(b => b.classList.remove('active'));\r\n    document.getElementById(`fx-${mode}`).classList.add('active');\r\n\r\n    // Show/Hide speed slider\r\n    document.getElementById('speed-control').style.display = (mode === 'none') ? 'none' : 'block';\r\n\r\n    // Clear previous interval\r\n    if (effectInterval) clearInterval(effectInterval);\r\n    canvas.style.opacity = 1; // Reset opacity\r\n\r\n    if (mode === 'pulse') {\r\n        runPulse();\r\n    } else if (mode === 'strobe') {\r\n        runStrobe();\r\n    }\r\n}\r\n\r\nbtnSteady.addEventListener(\"click\",  () => {\r\n    setEffect(\"none\");\r\n});\r\n\r\nbtnStrobe.addEventListener(\"click\",  () => {\r\n    setEffect(\"strobe\");\r\n});\r\n\r\nbtnPulse.addEventListener(\"click\",  () => {\r\n    setEffect(\"pulse\");\r\n});\r\n\r\nfunction updateSpeed(val) {\r\n    currentSpeed = val;\r\n    document.getElementById('speed-label').innerText = `SPEED: ${val}ms`;\r\n\r\n    // Restart effect to apply new speed immediately\r\n    setEffect(effectMode);\r\n}\r\n\r\nfunction runPulse() {\r\n    // Pulse is a soft CSS transition\r\n    canvas.style.transition = `opacity ${currentSpeed}ms ease-in-out`;\r\n    let toggle = false;\r\n\r\n    effectInterval = setInterval(() => {\r\n        canvas.style.opacity = toggle ? 1 : 0.1;\r\n        toggle = !toggle;\r\n    }, currentSpeed);\r\n}\r\n\r\nfunction runStrobe() {\r\n    // Strobe is a sharp cut (no transition)\r\n    canvas.style.transition = 'none';\r\n\r\n    effectInterval = setInterval(() => {\r\n        canvas.style.opacity = 0; // Flash Off\r\n        setTimeout(() => {\r\n            canvas.style.opacity = 1; // Flash On\r\n        }, 10); // 10ms \"On\" time creates a sharp frozen-motion effect\r\n    }, currentSpeed);\r\n}\r\n\r\n\r\nfunction closeMenu() { menu.style.display = 'none'; }\r\n\r\nbtnClose.addEventListener(\"click\",  () => {\r\n    closeMenu();\r\n});\r\n"],"names":["canvas","document","getElementById","menu","btnWhite","btnRed","btnGreen","btnBlue","btnClose","btnSteady","btnPulse","btnStrobe","state","split","warmth","softness","mode","isPulsing","initialPinchDist","updateDisplay","color","Math","max","style","opacity","documentElement","setProperty","setMode","m","querySelectorAll","forEach","b","classList","remove","event","target","add","window","addEventListener","e","touch","touches","screenWidth","innerWidth","clientX","clientY","isHidden","display","Capacitor","preventDefault","innerHeight","length","dX","dY","currentDist","sqrt","sensitivity","delta","min","hint","effectInterval","effectMode","setEffect","clearInterval","transition","toggle","setInterval","runPulse","setTimeout"],"ignoreList":[],"sourceRoot":""}