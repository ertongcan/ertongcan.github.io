{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack:///./game.js"],"sourcesContent":["const canvas = document.getElementById('canvas');\r\nconst menu = document.getElementById('menu');\r\nconst btnWhite = document.getElementById('btn-white');\r\nconst btnRed = document.getElementById('btn-red');\r\nconst btnGreen = document.getElementById('btn-green');\r\nconst btnBlue = document.getElementById('btn-blue');\r\nconst btnClose = document.getElementById('btn-close');\r\nconst btnSteady = document.getElementById('fx-none');\r\nconst btnPulse = document.getElementById('fx-pulse');\r\nconst btnStrobe = document.getElementById('fx-strobe');\r\nconst inpSpeed = document.getElementById('inp-speed');\r\n\r\nlet state = {\r\n    split: 50, warmth: 255, softness: 0,\r\n    mode: 'white', isPulsing: false,\r\n    initialPinchDist: 0\r\n};\r\n\r\nfunction closeMenu() { menu.style.display = 'none'; }\r\n\r\n    // --- CORE INTERACTION ---\r\nfunction updateDisplay() {\r\n    let color;\r\n    if (state.mode === 'white') {\r\n    color = `rgb(255, ${Math.max(180, state.warmth)}, ${state.warmth})`;\r\n    } else if (state.mode === 'red') {\r\n        color = `rgb(${state.warmth}, 0, 0)`;\r\n    } else if (state.mode === 'blue') {\r\n        color = `rgb(0, 0, ${state.warmth})`;\r\n    } else if (state.mode === 'green') {\r\n        color = `rgb(0, ${state.warmth}, 0)`;\r\n    }\r\n\r\n    canvas.style.opacity = 1;\r\n\r\n    document.documentElement.style.setProperty('--light-color', color);\r\n    document.documentElement.style.setProperty('--split', state.split + '%');\r\n    document.documentElement.style.setProperty('--softness', state.softness + '%');\r\n}\r\n\r\n// --- GESTURES ---\r\nlet pressTimer;\r\nconst TRIGGER_ZONE = 60;\r\nwindow.addEventListener('touchstart', (e) => {\r\n\r\n    //menu.style.display = 'flex';\r\n    const touch = e.touches[0];\r\n    const screenWidth = window.innerWidth;\r\n\r\n    // Check if the touch is in the top-right corner\r\n    const isTopRight = (touch.clientX > screenWidth - TRIGGER_ZONE) && (touch.clientY < TRIGGER_ZONE);\r\n\r\n    if (isTopRight) {\r\n        // Toggle Menu\r\n        const isHidden = menu.style.display === 'none' || menu.style.display === '';\r\n        menu.style.display = isHidden ? 'flex' : 'none';\r\n        if(isHidden) {\r\n            btnClose.addEventListener(\"click\",  (e) => {\r\n                closeMenu();\r\n            });\r\n        }\r\n        // Vibrate for feedback (Requires Capacitor Haptics plugin)\r\n        if (window.Capacitor) {\r\n            // Haptics.impact({ style: 'light' });\r\n        }\r\n\r\n        // Prevent the light from shifting when we just wanted the menu\r\n        return;\r\n    }\r\n\r\n\r\n});\r\n\r\nwindow.addEventListener('touchmove', (e) => {\r\n    // clearTimeout(pressTimer);\r\n    if (menu.style.display === 'flex') return;\r\n    e.preventDefault();\r\n    const touch = e.touches[0];\r\n    state.split = (touch.clientX / window.innerWidth) * 100;\r\n    state.warmth = (touch.clientY / window.innerHeight) * 255;\r\n\r\n    if (e.touches.length === 2) {\r\n        const dX = e.touches[0].clientX - e.touches[1].clientX;\r\n        const dY = e.touches[0].clientY - e.touches[1].clientY;\r\n        const currentDist = Math.sqrt(dX * dX + dY * dY);\r\n        // Calculate change in distance\r\n        const sensitivity = 0.15;\r\n        const delta = (currentDist - state.initialPinchDist) * sensitivity;\r\n\r\n        state.softness = Math.max(0, Math.min(45, state.softness + delta));\r\n        state.initialPinchDist = currentDist; // Reset for smooth scaling\r\n    }\r\n    updateDisplay();\r\n    hint.style.opacity = 0;\r\n});\r\n\r\n    // window.addEventListener('touchend', () => clearTimeout(pressTimer));\r\n\r\n    // --- PRO FEATURES ---\r\nfunction setMode(m, evt) {\r\n    state.mode = m;\r\n    document.querySelectorAll('.btn-group button').forEach(b => b.classList.remove('active'));\r\n    evt.target.classList.add('active');\r\n    updateDisplay();\r\n}\r\n\r\nlet effectInterval = null;\r\nlet currentSpeed = 500; // milliseconds\r\nlet effectMode = 'none'; // 'none', 'pulse', or 'strobe'\r\n\r\ninpSpeed.addEventListener(\"input\", (evt) => {\r\n    const val = parseInt(evt.target.value);\r\n\r\n    document.getElementById('speed-label').innerText = `SPEED: ${val}ms`;\r\n\r\n    // Restart effect to apply new speed immediately\r\n    setEffect(effectMode);\r\n});\r\nbtnWhite.addEventListener(\"click\", (evt) => {\r\n    setMode('white', evt);\r\n});\r\n\r\nbtnGreen.addEventListener(\"click\", (evt) => {\r\n    setMode('green', evt);\r\n});\r\n\r\nbtnRed.addEventListener(\"click\", (evt) => {\r\n    setMode('red', evt);\r\n});\r\n\r\nbtnBlue.addEventListener(\"click\", (evt) => {\r\n    setMode('blue', evt);\r\n});\r\nfunction setEffect(mode) {\r\n    effectMode = mode;\r\n\r\n    // UI Update\r\n    document.querySelectorAll('[id^=\"fx-\"]').forEach(b => b.classList.remove('active'));\r\n    document.getElementById(`fx-${mode}`).classList.add('active');\r\n\r\n    // Show/Hide speed slider\r\n    document.getElementById('speed-control').style.display = (mode === 'none') ? 'none' : 'block';\r\n\r\n    // Clear previous interval\r\n    if (effectInterval) clearInterval(effectInterval);\r\n    canvas.style.opacity = 1; // Reset opacity\r\n\r\n    if (mode === 'pulse') {\r\n        runPulse();\r\n    } else if (mode === 'strobe') {\r\n        runStrobe();\r\n    }\r\n}\r\n\r\nbtnSteady.addEventListener(\"click\",  () => {\r\n    setEffect(\"none\");\r\n});\r\n\r\nbtnStrobe.addEventListener(\"click\",  () => {\r\n    setEffect(\"strobe\");\r\n});\r\n\r\nbtnPulse.addEventListener(\"click\",  () => {\r\n    setEffect(\"pulse\");\r\n});\r\n\r\nfunction runPulse() {\r\n    // Pulse is a soft CSS transition\r\n    canvas.style.transition = `opacity ${currentSpeed}ms ease-in-out`;\r\n    let toggle = false;\r\n\r\n    effectInterval = setInterval(() => {\r\n        canvas.style.opacity = toggle ? 1 : 0.1;\r\n        toggle = !toggle;\r\n    }, currentSpeed);\r\n}\r\n\r\nfunction runStrobe() {\r\n    // Strobe is a sharp cut (no transition)\r\n    canvas.style.transition = 'none';\r\n\r\n    effectInterval = setInterval(() => {\r\n        canvas.style.opacity = 0; // Flash Off\r\n        setTimeout(() => {\r\n            canvas.style.opacity = 1; // Flash On\r\n        }, 10); // 10ms \"On\" time creates a sharp frozen-motion effect\r\n    }, currentSpeed);\r\n}\r\n\r\n\r\n\r\n"],"names":["canvas","document","getElementById","menu","btnWhite","btnRed","btnGreen","btnBlue","btnClose","btnSteady","btnPulse","btnStrobe","inpSpeed","state","split","warmth","softness","mode","isPulsing","initialPinchDist","updateDisplay","color","Math","max","style","opacity","documentElement","setProperty","setMode","m","evt","querySelectorAll","forEach","b","classList","remove","target","add","window","addEventListener","e","touch","touches","screenWidth","innerWidth","clientX","clientY","isHidden","display","Capacitor","preventDefault","innerHeight","length","dX","dY","currentDist","sqrt","sensitivity","delta","min","hint","effectInterval","effectMode","setEffect","clearInterval","transition","toggle","setInterval","runPulse","setTimeout","val","parseInt","value","innerText"],"ignoreList":[],"sourceRoot":""}