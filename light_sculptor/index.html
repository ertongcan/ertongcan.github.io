<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Contrast: Sculpt</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background-color: #000;
      touch-action: none; /* Prevents browser zoom/scroll */
    }

    /* This div will hold the gradient background */
    #canvas {
      width: 100%;
      height: 100%;
      transition: background 0.05s linear;
    }

    #hint {
      position: absolute;
      bottom: 30px;
      width: 100%;
      text-align: center;
      color: rgba(128, 128, 128, 0.5);
      font-family: 'Inter', sans-serif;
      font-size: 10px;
      letter-spacing: 3px;
      text-transform: uppercase;
      pointer-events: none;
    }
  </style>
</head>
<body>

<div id="canvas"></div>
<div id="hint">Slide to move â€¢ Pinch to blur</div>

<script>
  const canvas = document.getElementById('canvas');
  const hint = document.getElementById('hint');

  let state = {
    split: 50,      // X axis (0-100)
    warmth: 255,    // Y axis (Blue component)
    softness: 0,    // Pinch (0-40)
    initialDist: 0  // For pinch math
  };

  function updateDisplay() {
    // Calculate Warmth Color
    const r = 255;
    const g = Math.max(180, state.warmth);
    const b = state.warmth;
    const lightColor = `rgb(${r}, ${g}, ${b})`;

    // Create the gradient string
    // Softness defines how far apart the Black and Light colors are
    const edge1 = state.split - state.softness;
    const edge2 = state.split + state.softness;

    canvas.style.background = `linear-gradient(to right, #000 ${edge1}%, ${lightColor} ${edge2}%)`;
  }

  function handleTouch(e) {
    hint.style.opacity = 0;

    if (e.touches.length === 1) {
      // SINGLE TOUCH: Move Split and Warmth
      const touch = e.touches[0];
      state.split = (touch.clientX / window.innerWidth) * 100;

      // Vertical move changes blue channel (255 = white, 0 = orange)
      state.warmth = (touch.clientY / window.innerHeight) * 255;

    } else if (e.touches.length === 2) {
      // MULTI TOUCH: Pinch for Softness
      const dX = e.touches[0].clientX - e.touches[1].clientX;
      const dY = e.touches[0].clientY - e.touches[1].clientY;
      const dist = Math.sqrt(dX * dX + dY * dY);

      if (state.initialDist === 0) {
        state.initialDist = dist;
      } else {
        // Adjust softness based on change in distance
        const diff = (dist - state.initialDist) / 10;
        state.softness = Math.max(0, Math.min(40, state.softness + diff));
        state.initialDist = dist;
      }
    }
    updateDisplay();
  }

  window.addEventListener('touchstart', (e) => {
    if (e.touches.length === 2) {
      const dX = e.touches[0].clientX - e.touches[1].clientX;
      const dY = e.touches[0].clientY - e.touches[1].clientY;
      state.initialDist = Math.sqrt(dX * dX + dY * dY);
    }
  });

  window.addEventListener('touchmove', handleTouch, { passive: false });
  window.addEventListener('touchend', () => { state.initialDist = 0; });

  // Run once to set initial view
  updateDisplay();
</script>
</body>
</html>
